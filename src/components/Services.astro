---
// src/components/Services.astro
import { getLangFromUrl, useTranslations } from '../i18n/utils';

// Define a type for valid icon keys
type IconKey = 'washing-machine' | 'refrigerator' | 'air-conditioner' | 'dishwasher' | 'oven' | 'other';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const isEN = lang === 'en';

const title = isEN ? 'Our Services' : 'Нашите услуги';
const subtitle = isEN 
  ? 'We repair all types of home appliances with high-quality parts and warranty' 
  : 'Ремонтираме всички видове домашни уреди с качествени части и гаранция';

const services = [
  {
    icon: 'washing-machine' as IconKey,
    title: isEN ? 'Washing Machines' : 'Перални',
    description: isEN 
      ? 'Repair of all brands and models of washing machines. We fix leaks, motor issues, electronics and more.'
      : 'Ремонт на всички марки и модели перални машини. Отстраняваме течове, проблеми с мотора, електрониката и други.',
  },
  {
    icon: 'refrigerator' as IconKey,
    title: isEN ? 'Refrigerators' : 'Хладилници',
    description: isEN 
      ? 'Fast repair of refrigerators, freezers and wine coolers. Freon recharge, compressor repairs.'
      : 'Бърз ремонт на хладилници, фризери и винени хладилници. Зареждане с фреон, ремонт на компресори.',
  },
  {
    icon: 'air-conditioner' as IconKey,
    title: isEN ? 'Air Conditioners' : 'Климатици',
    description: isEN 
      ? 'Installation, maintenance and repair of air conditioners. Regular cleaning and filter replacements.'
      : 'Монтаж, поддръжка и ремонт на климатици. Редовно почистване и смяна на филтри.',
  },
  {
    icon: 'dishwasher' as IconKey,
    title: isEN ? 'Dishwashers' : 'Съдомиялни',
    description: isEN 
      ? 'Troubleshooting and repair of dishwashers. Water inlet problems, draining issues, and electronics.'
      : 'Диагностика и ремонт на съдомиялни машини. Проблеми с подаването на вода, източването и електрониката.',
  },
  {
    icon: 'oven' as IconKey,
    title: isEN ? 'Ovens & Stoves' : 'Фурни и котлони',
    description: isEN 
      ? 'Repair of electric and gas ovens, cooktops and ranges. Heating elements, thermostats, control boards.'
      : 'Ремонт на електрически и газови фурни, плотове и печки. Нагревателни елементи, термостати, контролни платки.',
  },
  {
    icon: 'other' as IconKey,
    title: isEN ? 'Other Appliances' : 'Други уреди',
    description: isEN 
      ? 'Repair of microwave ovens, coffee machines, hoods, dryers and other small household appliances.'
      : 'Ремонт на микровълнови фурни, кафемашини, аспиратори, сушилни и други малки домакински уреди.',
  },
];

// SVG Icons for each service
const icons: Record<IconKey, string> = {
  'washing-machine': `<svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="20" x="3" y="2" rx="2"/><circle cx="12" cy="14" r="4"/><circle cx="12" cy="14" r="1"/><path d="M8 6h.01M11 6h.01M14 6h.01"/></svg>`,
  'refrigerator': `<svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 6a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2z"/><path d="M5 10h14"/><path d="M9 2v4"/><path d="M9 16v2"/></svg>`,
  'air-conditioner': `<svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 9a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1z"/><path d="M12 12h.01"/><path d="m6 17-2 2"/><path d="m10 17-2 2"/><path d="m14 17 2 2"/><path d="m18 17 2 2"/></svg>`,
  'dishwasher': `<svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M3 9h18"/><path d="M8 16v-4"/><path d="M16 16v-4"/><path d="M8 6h.01"/><path d="M12 6h.01"/><path d="M16 6h.01"/></svg>`,
  'oven': `<svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect width="16" height="20" x="4" y="2" rx="2"/><path d="M7 16h10"/><path d="M7 8h10"/><path d="M7 12h10"/><path d="M7 7v6"/><path d="M17 7v6"/></svg>`,
  'other': `<svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 3a2 2 0 0 0-2 2"/><path d="M18 3a2 2 0 0 1 2 2"/><path d="M18 21a2 2 0 0 1-2-2"/><path d="M18 21a2 2 0 0 0 2-2"/><path d="M6 3a2 2 0 0 0-2 2"/><path d="M6 3a2 2 0 0 1 2 2"/><path d="M6 21a2 2 0 0 0 2-2"/><path d="M6 21a2 2 0 0 1-2-2"/><path d="M3 9v0"/><path d="M3 15v0"/><path d="M21 9v0"/><path d="M21 15v0"/><path d="M9 3v0"/><path d="M9 21v0"/><path d="M15 3v0"/><path d="M15 21v0"/><path d="M9 12a3 3 0 1 0 6 0 3 3 0 1 0-6 0"/></svg>`,
};
---

<section id="services" class="py-20 bg-white">
  <div class="container">
    <div class="text-center max-w-3xl mx-auto">
      <h2 class="text-3xl font-bold text-gray-900">{t('services.title')}</h2>
      <p class="mt-4 text-xl text-gray-600">{t('services.subtitle')}</p>
    </div>
    
    <div class="mt-16 grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {services.map(service => (
        <div class="bg-gray-50 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-100">
          <div class="text-primary">
            <Fragment set:html={icons[service.icon]} />
          </div>
          <h3 class="mt-4 text-xl font-semibold text-gray-900">{service.title}</h3>
          <p class="mt-2 text-gray-600">{service.description}</p>
        </div>
      ))}
    </div>
  </div>
</section>