---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const isEN = lang === 'en';

// Define neighborhoods or areas you service
const neighborhoods = isEN 
  ? ['Center', 'Chayka', 'Levski', 'Vladislav Varnenchik', 'Mladost', 'Asparuhovo', 'Galata'] 
  : ['Център', 'Чайка', 'Левски', 'Владислав Варненчик', 'Младост', 'Аспарухово', 'Галата'];

const title = isEN ? 'Our Service Area' : 'Нашият район на обслужване';
const subtitle = isEN 
  ? 'We service Varna and surrounding areas within a 20km radius' 
  : 'Обслужваме Варна и околностите в радиус от 20км';
const areaLabel = isEN ? 'Areas we cover:' : 'Райони, които покриваме:';
const contactLabel = isEN ? 'Have questions about your area?' : 'Имате въпроси за вашия район?';
const contactText = isEN 
  ? 'Call us to check if we service your location' 
  : 'Обадете се, за да проверите дали обслужваме вашето местоположение';
---

<section class="py-16 bg-gray-50 border-t border-gray-100">
  <div class="container">
    <div class="text-center mb-10">
      <h2 class="text-2xl md:text-3xl font-bold text-gray-900">{title}</h2>
      <p class="mt-2 text-gray-700">{subtitle}</p>
    </div>
    
    <div class="grid md:grid-cols-5 gap-8 items-start">
      <!-- Left side: Map -->
      <div class="md:col-span-3">
        <div class="bg-white rounded-lg shadow-sm overflow-hidden border border-gray-100">
          <div class="relative h-[400px] w-full">
            <iframe 
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d93863.19553341077!2d27.837949771951357!3d43.21719036667841!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x40a4538baaf3d7a1%3A0x5727941c71a58b7c!2sVarna%2C%20Bulgaria!5e0!3m2!1sen!2sus!4v1715959693332!5m2!1sen!2sus" 
              width="600" 
              height="450" 
              style="border:0;" 
              allowfullscreen="" 
              loading="lazy" 
              referrerpolicy="no-referrer-when-downgrade"
              class="absolute top-0 left-0 w-full h-full"
            ></iframe>
          </div>
          
          <!-- Map overlay showing 20km radius - optional, could be an SVG circle -->
          <div class="absolute top-0 left-0 w-full h-full pointer-events-none hidden">
            <!-- This would be a circle overlay showing the radius - omitted for simplicity -->
          </div>
        </div>
      </div>
      
      <!-- Right side: Coverage details -->
      <div class="md:col-span-2 flex flex-col gap-6">
        <!-- Neighborhoods we cover -->
        <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-100">
          <h3 class="font-semibold text-lg text-gray-900 mb-3">
            {areaLabel}
          </h3>
          
          <div class="flex flex-wrap gap-2">
            {neighborhoods.map(neighborhood => (
              <span class="inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-blue-50 text-blue-800">
                {neighborhood}
              </span>
            ))}
          </div>
        </div>
        
        <!-- Contact info / call for other areas -->
        <div class="bg-primary/5 rounded-lg p-6 border border-primary/10">
          <h3 class="font-semibold text-lg text-gray-900 mb-2">
            {contactLabel}
          </h3>
          
          <p class="text-gray-700 mb-4">{contactText}</p>
          
          <a href="tel:+359878123456" class="btn-primary inline-flex items-center justify-center w-full">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
            </svg>
            +359 878 123 456
          </a>
        </div>
        
        <!-- Working hours - optional addition -->
        <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-100">
          <h3 class="font-semibold text-lg text-gray-900 mb-3">
            {isEN ? 'Working Hours' : 'Работно време'}
          </h3>
          
          <div class="space-y-2">
            <div class="flex justify-between">
              <span class="text-gray-700">{isEN ? 'Monday - Friday' : 'Понеделник - Петък'}</span>
              <span class="font-medium text-gray-900">8:00 - 19:00</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-700">{isEN ? 'Saturday' : 'Събота'}</span>
              <span class="font-medium text-gray-900">9:00 - 15:00</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-700">{isEN ? 'Sunday' : 'Неделя'}</span>
              <span class="font-medium text-gray-900">{isEN ? 'Closed' : 'Затворено'}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>