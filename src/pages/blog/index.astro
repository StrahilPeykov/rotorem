---
import Layout from '../../layouts/Base.astro';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const isEN = lang === 'en';

const title = isEN 
  ? 'Appliance Repair Blog | Tips & Guides | RotoRem Varna'
  : 'Блог за ремонт на битова техника | Съвети и ръководства | РотоРем Варна';

const description = isEN 
  ? 'Helpful tips and guides for appliance maintenance and repair from RotoRem Varna experts. Learn how to keep your appliances running smoothly.'
  : 'Полезни съвети и ръководства за поддръжка и ремонт на битова техника от експертите на РотоРем Варна. Научете как да поддържате уредите си.';

// UPDATED Blog posts data with real posts from documents
const blogPosts = [
  {
    title: 'Ремонт на котлони Варна – решение за стъклокерамичен плот и индукционни котлони',
    excerpt: 'Ремонт на котлони Варна без излишни нерви и главоболия? Сервиз на котлони Варна от РотоРем Варна знае точно какво ви трябва...',
    date: '15 януари, 2025',
    readTime: '6 мин четене',
    slug: 'remont-na-kotloni-varna-stuklokeramichen-plot',
    category: 'Ремонт на уреди',
    image: '/img/blog/cooktop-repair.webp'
  },
  {
    title: 'Когато пералнята спре: ремонт на перални Варна, който идва на място',
    excerpt: 'Ремонт на перални Варна -- когато пералнята спре неочаквано, денят ви бързо може да се превърне в хаос. Сервиз перални Варна РотоРем идва директно на място...',
    date: '14 януари, 2025',
    readTime: '8 мин четене',
    slug: 'kogato-peralnqta-spre-remont-na-peralni-varna',
    category: 'Ремонт на перални',
    image: '/img/blog/washing-machine-repair.webp'
  },
  {
    title: 'Бойлерът не загрява? Ремонт на бойлери Варна решава проблема на момента на място',
    excerpt: 'Ремонт на бойлери Варна -- това е първото нещо, за което си мислите, щом усетите студена вода вместо приятната топлина...',
    date: '13 януари, 2025',
    readTime: '7 мин четене',
    slug: 'boyler-ne-zagrqva-remont-na-boyleri-varna',
    category: 'Ремонт на бойлери',
    image: '/img/blog/boiler-repair.webp'
  },
  {
    title: 'Електротехник Варна е човекът, от когото се нуждаеш, когато токът изгасне ненадейно',
    excerpt: 'Електроуслуги Варна вече не са лукс, а реална необходимост, когато аварията се случи изневиделица. РотоРем Варна е тук, за да направи живота ти по-лесен...',
    date: '12 януари, 2025',
    readTime: '9 мин четене',
    slug: 'elektrotehnik-varna-avarii-montaji',
    category: 'Електроуслуги',
    image: '/img/blog/electrical-services.webp'
  },
  {
    title: 'Ремонт на пералня и сушилна Варна: сервиз на място',
    excerpt: 'Пералнята не центрофугира? Точно заради такива моменти съществува и услугата ремонт на перални и сушилни Варна...',
    date: '11 януари, 2025',
    readTime: '8 мин четене',
    slug: 'remont-na-perealnq-i-sushilna-varna-serviz',
    category: 'Ремонт на перални и сушилни',
    image: '/img/blog/washer-dryer-repair.webp'
  },
  {
    title: 'Ел техник Варна – надежден демонтаж и монтаж на ключове и контакти във вашия дом',
    excerpt: 'Ел техник Варна е точният специалист, който търсите, когато контактът ви не работи или ключът за лампата отказва...',
    date: '10 януари, 2025',
    readTime: '6 мин четене',
    slug: 'el-tehnik-varna-montaj-demontaj-klyuchove-kontakti',
    category: 'Електрически ключове и контакти',
    image: '/img/blog/electrical-switches.webp'
  }
];

// UPDATED categories to match the actual blog posts
const categories = [
  { name: 'Всички', slug: 'all' },
  { name: 'Ремонт на уреди', slug: 'remont-na-uredi' },
  { name: 'Ремонт на перални', slug: 'remont-na-peralni' },
  { name: 'Ремонт на бойлери', slug: 'remont-na-boyleri' },
  { name: 'Електроуслуги', slug: 'elektrouslvgi' },
  { name: 'Електрически ключове и контакти', slug: 'elektricheski-klyuchove-kontakti' }
];
---

<Layout title={title} description={description}>
  <section class="py-16">
    <div class="container max-w-6xl">
      <!-- Header -->
      <header class="text-center max-w-3xl mx-auto mb-12">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">
          Блог за ремонт на битова техника
        </h1>
        <div class="w-20 h-1 bg-accent mx-auto my-4"></div>
        <p class="text-xl text-gray-600">
          Експертни съвети и ръководства от РотоРем Варна за поддръжка и ремонт на вашите уреди
        </p>
      </header>

      <!-- Category Filter -->
      <div class="mb-12">
        <div class="flex flex-wrap justify-center gap-3">
          {categories.map(category => (
            <button 
              class="px-4 py-2 rounded-full border border-gray-300 text-gray-700 hover:bg-primary hover:text-white hover:border-primary transition-all duration-300 category-filter"
              data-category={category.slug}
            >
              {category.name}
            </button>
          ))}
        </div>
      </div>

      <!-- Featured Post -->
      <div class="mb-16">
        <h2 class="text-2xl font-semibold mb-6 text-gray-900">
          Препоръчана статия
        </h2>
        <article class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
          <div class="md:flex">
            <div class="md:w-1/2">
              <img 
                src={blogPosts[0].image} 
                alt={blogPosts[0].title}
                class="w-full h-64 md:h-full object-cover"
                width="600"
                height="400"
              />
            </div>
            <div class="md:w-1/2 p-8">
              <div class="flex items-center mb-4">
                <span class="bg-primary text-white px-3 py-1 rounded-full text-sm font-medium">
                  {blogPosts[0].category}
                </span>
                <span class="ml-3 text-gray-500 text-sm">{blogPosts[0].date}</span>
              </div>
              <h3 class="text-2xl font-bold text-gray-900 mb-4">
                <a href={`/blog/${blogPosts[0].slug}`} class="hover:text-primary transition-colors">
                  {blogPosts[0].title}
                </a>
              </h3>
              <p class="text-gray-600 mb-6">
                {blogPosts[0].excerpt}
              </p>
              <div class="flex items-center justify-between">
                <a 
                  href={`/blog/${blogPosts[0].slug}`}
                  class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark transition-colors font-medium"
                >
                  Прочетете повече
                </a>
                <span class="text-gray-500 text-sm">{blogPosts[0].readTime}</span>
              </div>
            </div>
          </div>
        </article>
      </div>

      <!-- Blog Posts Grid -->
      <div class="mb-12">
        <h2 class="text-2xl font-semibold mb-6 text-gray-900">
          Последни статии
        </h2>
        
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="blog-posts-grid">
          {blogPosts.slice(1).map(post => (
            <article class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 blog-post" data-category={post.category.toLowerCase().replace(/\s+/g, '-')}>
              <img 
                src={post.image} 
                alt={post.title}
                class="w-full h-48 object-cover"
                width="400"
                height="200"
              />
              <div class="p-6">
                <div class="flex items-center mb-3">
                  <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm">
                    {post.category}
                  </span>
                  <span class="ml-3 text-gray-500 text-sm">{post.date}</span>
                </div>
                
                <h3 class="text-xl font-semibold text-gray-900 mb-3">
                  <a href={`/blog/${post.slug}`} class="hover:text-primary transition-colors">
                    {post.title}
                  </a>
                </h3>
                
                <p class="text-gray-600 mb-4">
                  {post.excerpt}
                </p>
                
                <div class="flex items-center justify-between">
                  <a 
                    href={`/blog/${post.slug}`}
                    class="text-primary font-medium hover:text-primary-dark transition-colors"
                  >
                    Прочетете повече →
                  </a>
                  <span class="text-gray-500 text-sm">{post.readTime}</span>
                </div>
              </div>
            </article>
          ))}
        </div>
      </div>

      <!-- Newsletter Signup -->
      <div class="bg-gradient-to-r from-primary to-primary-dark rounded-xl p-8 text-white text-center">
        <h2 class="text-2xl font-bold mb-4">
          Получавайте експертни съвети
        </h2>
        <p class="text-xl mb-6 opacity-90">
          Абонирайте се за нашия бюлетин за най-новите съвети за поддръжка и ръководства за ремонт
        </p>
        
        <form class="max-w-md mx-auto flex gap-3">
          <input 
            type="email" 
            placeholder="Въведете вашия имейл"
            class="flex-1 px-4 py-3 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-white"
            required
          />
          <button 
            type="submit" 
            class="bg-accent hover:bg-amber-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors"
          >
            Абонирай се
          </button>
        </form>
        
        <p class="text-sm mt-4 opacity-75">
          Без спам, отписване по всяко време. Уважаваме вашата поверителност.
        </p>
      </div>

      <!-- Contact CTA - PHONE AND EMAIL ONLY -->
      <div class="mt-16 text-center">
        <h2 class="text-2xl font-semibold text-gray-900 mb-4">
          Нуждаете се от професионална помощ?
        </h2>
        <p class="text-gray-600 mb-6">
          Не можете да намерите отговора, който търсите? Нашите експертни техници са тук, за да помогнат.
        </p>
        
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="tel:+359898340982" class="btn-primary inline-flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
            </svg>
            089 834 0982
          </a>
          
          <a href="mailto:n.ivanov.ivanov@abv.bg" class="btn-cta inline-flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
            Изпратете имейл
          </a>
        </div>
        
        <!-- Additional info text for phone booking -->
        <div class="mt-4 text-center text-gray-600 text-sm">
          <p>Обадете се за запазване на час за ремонт</p>
        </div>
      </div>
    </div>
  </section>

  <!-- SEO Content Section - UPDATED FOR REAL BLOG CONTENT -->
  <div class="rotorem-seo-text">
    <style>
      .rotorem-seo-text {
        font-size: 74%;
        color: #777 !important;
        background-color: #f9fafb;
        padding: 2rem 0;
      }
      .rotorem-seo-text h2,
      .rotorem-seo-text h3,
      .rotorem-seo-text h4 {
        font-size: 1em;
        margin: 1em 0 0.5em;
        color: #777;
        font-weight: 400;
      }
      .rotorem-seo-text a {
        color: #777;
        text-decoration: underline;
      }
      .rotorem-seo-text p {
        margin: 0.5em 0;
        line-height: 1.5;
      }
      .rotorem-seo-text ul {
        margin: 0.5em 0;
        padding-left: 1.5em;
      }
      .rotorem-seo-text li {
        margin: 0.3em 0;
      }
    </style>
    
    <div class="container max-w-4xl">
      <h2>Блог за ремонт на битова техника – професионални съвети от експертите на РотоРем Варна</h2>
      <p>В нашия блог за ремонт на битова техника ще намерите реални, практични съвети от професионалните техници на РотоРем Варна. Всяка статия е написана въз основа на реален опит и хиляди ремонти, извършени в домовете на клиентите ни във Варна и региона.</p>

      <h2>Практически ръководства за ремонт на перални машини</h2>
      <p>Научете как да разпознаете кога пералнята ви се нуждае от професионална помощ. Нашите статии покриват най-честите проблеми като липса на центрофугиране, течове, странни шумове и електрически неизправности. Всеки съвет е проверен в практиката и ви помага да спестите време и пари.</p>

      <h2>Експертни съвети за ремонт на бойлери и електроуслуги</h2>
      <p>Когато бойлерът не загрява или имате електрическа авария, времето е от съществено значение. Нашите статии ви обясняват какво да правите в такива ситуации, как да предотвратите бъдещи проблеми и кога точно да повикате професионален електротехник.</p>

      <h2>Съвети за ремонт на съдомиялни машини и котлони</h2>
      <p>Научете как да поддържате правилно вашите съдомиялни машини и котлони, за да избегнете скъпи ремонти. Статиите ни включват практически съвети за почистване, профилактика и разпознаване на ранните признаци на повреди.</p>

      <h2>Защо да четете нашия блог за ремонт на битова техника?</h2>
      <ul>
        <li>Всички съвети са от реални професионални техници с над 15 години опит</li>
        <li>Статиите са базирани на хиляди реални ремонти във Варна</li>
        <li>Получавате практически решения, които можете да приложите веднага</li>
        <li>Научавате как да предотвратите скъпи ремонти в бъдеще</li>
        <li>Всяка статия включва съвети за безопасност и професионални препоръки</li>
      </ul>

      <h2>Актуални статии за електроуслуги и монтажи</h2>
      <p>Електрическата безопасност в дома е от първостепенна важност. Нашите статии за електроуслуги ви дават професионални съвети за монтаж на ключове и контакти, смяна на ел табла и справяне с електрически аварии. Всички препоръки следват актуалните стандарти за безопасност.</p>

      <h2>Свържете се с нас за професионален ремонт</h2>
      <p>Ако статиите в блога ни не отговарят на вашия въпрос, винаги можете да се свържете директно с нашите техници. Предлагаме професионален ремонт на битова техника във Варна с гаранция за качество и бърза реакция.</p>
    </div>
  </div>
</Layout>

<script>
  // UPDATED Category filtering functionality for real categories
  document.addEventListener('DOMContentLoaded', function() {
    const categoryButtons = document.querySelectorAll<HTMLButtonElement>('.category-filter');
    const blogPosts = document.querySelectorAll<HTMLElement>('.blog-post');
    
    categoryButtons.forEach(button => {
      button.addEventListener('click', function(event) {
        const target = event.target as HTMLButtonElement;
        const selectedCategory = target.getAttribute('data-category');
        
        // Update button states
        categoryButtons.forEach(btn => {
          btn.classList.remove('bg-primary', 'text-white', 'border-primary');
          btn.classList.add('border-gray-300', 'text-gray-700');
        });
        
        target.classList.add('bg-primary', 'text-white', 'border-primary');
        target.classList.remove('border-gray-300', 'text-gray-700');
        
        // Filter posts
        blogPosts.forEach(post => {
          if (selectedCategory === 'all') {
            post.style.display = 'block';
          } else {
            const postCategory = post.getAttribute('data-category');
            // Match category by converting both to lowercase and removing spaces/dashes
            const normalizedPostCategory = postCategory?.toLowerCase().replace(/[\s-]+/g, '-');
            const normalizedSelectedCategory = selectedCategory?.toLowerCase().replace(/[\s-]+/g, '-');
            
            if (normalizedPostCategory?.includes(normalizedSelectedCategory!) || 
                normalizedSelectedCategory?.includes(normalizedPostCategory!)) {
              post.style.display = 'block';
            } else {
              post.style.display = 'none';
            }
          }
        });
      });
    });
    
    // Set "All" as active by default
    const allButton = document.querySelector<HTMLButtonElement>('[data-category="all"]');
    if (allButton) {
      allButton.classList.add('bg-primary', 'text-white', 'border-primary');
    }
  });
</script>