---
import Layout from '../../layouts/Base.astro';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const isEN = lang === 'en';

const title = isEN 
  ? 'Appliance Repair Blog | Tips & Guides | RotoRem Varna'
  : 'Блог за ремонт на битова техника | Съвети и ръководства | РотоРем Варна';

const description = isEN 
  ? 'Helpful tips and guides for appliance maintenance and repair from RotoRem Varna experts. Learn how to keep your appliances running smoothly.'
  : 'Полезни съвети и ръководства за поддръжка и ремонт на битова техника от експертите на РотоРем Варна. Научете как да поддържате уредите си.';

// Blog posts data - these would typically come from a CMS or markdown files
const blogPosts = [
  {
    title: isEN 
      ? '7 Tips to Extend Your Washing Machine Life'
      : '7 съвета за удължаване живота на пералнята',
    excerpt: isEN 
      ? 'Learn essential maintenance tips that will keep your washing machine running efficiently for years to come...'
      : 'Научете основни съвети за поддръжка, които ще поддържат пералнята ви в добро състояние за години напред...',
    date: isEN ? 'March 15, 2025' : '15 март, 2025',
    readTime: isEN ? '5 min read' : '5 мин четене',
    slug: 'washing-machine-maintenance-tips',
    category: isEN ? 'Maintenance' : 'Поддръжка',
    image: '/img/blog/washing-machine-tips.webp'
  },
  {
    title: isEN 
      ? 'When to Repair vs Replace Your Appliances'
      : 'Кога да ремонтирате, а кога да подмените уредите си',
    excerpt: isEN 
      ? 'A comprehensive guide to help you decide whether to repair or replace your broken appliances...'
      : 'Пълно ръководство, което ще ви помогне да решите дали да ремонтирате или да подмените повредените уреди...',
    date: isEN ? 'March 10, 2025' : '10 март, 2025',
    readTime: isEN ? '7 min read' : '7 мин четене',
    slug: 'repair-vs-replace-appliances',
    category: isEN ? 'Buying Guide' : 'Ръководство за покупка',
    image: '/img/blog/repair-vs-replace.webp'
  },
  {
    title: isEN 
      ? 'Most Common Dishwasher Problems in Varna'
      : 'Най-честите проблеми със съдомиялни във Варна',
    excerpt: isEN 
      ? 'Discover the most frequent dishwasher issues we encounter in Varna and how to prevent them...'
      : 'Открийте най-честите проблеми със съдомиялни, които срещаме във Варна и как да ги предотвратите...',
    date: isEN ? 'March 5, 2025' : '5 март, 2025',
    readTime: isEN ? '6 min read' : '6 мин четене',
    slug: 'common-dishwasher-problems-varna',
    category: isEN ? 'Troubleshooting' : 'Отстраняване на неизправности',
    image: '/img/blog/dishwasher-problems.webp'
  },
  {
    title: isEN 
      ? 'How Varna\'s Water Quality Affects Your Appliances'
      : 'Как качеството на водата във Варна влияе на уредите ви',
    excerpt: isEN 
      ? 'Learn about Varna\'s water characteristics and how they impact your washing machines and dishwashers...'
      : 'Научете за характеристиките на водата във Варна и как те влияят на пералните и съдомиялните ви...',
    date: isEN ? 'February 28, 2025' : '28 февруари, 2025',
    readTime: isEN ? '8 min read' : '8 мин четене',
    slug: 'varna-water-quality-appliances',
    category: isEN ? 'Local Insights' : 'Местни съвети',
    image: '/img/blog/water-quality.webp'
  }
];

const categories = [
  { name: isEN ? 'All' : 'Всички', slug: 'all' },
  { name: isEN ? 'Maintenance' : 'Поддръжка', slug: 'maintenance' },
  { name: isEN ? 'Troubleshooting' : 'Отстраняване на неизправности', slug: 'troubleshooting' },
  { name: isEN ? 'Buying Guide' : 'Ръководство за покупка', slug: 'buying-guide' },
  { name: isEN ? 'Local Insights' : 'Местни съвети', slug: 'local-insights' }
];
---

<Layout title={title} description={description}>
  <section class="py-16">
    <div class="container max-w-6xl">
      <!-- Header -->
      <header class="text-center max-w-3xl mx-auto mb-12">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">
          {isEN ? 'Appliance Repair Blog' : 'Блог за ремонт на битова техника'}
        </h1>
        <div class="w-20 h-1 bg-accent mx-auto my-4"></div>
        <p class="text-xl text-gray-600">
          {isEN 
            ? 'Expert tips and guides from RotoRem Varna to help you maintain and repair your appliances'
            : 'Експертни съвети и ръководства от РотоРем Варна за поддръжка и ремонт на вашите уреди'}
        </p>
      </header>

      <!-- Category Filter -->
      <div class="mb-12">
        <div class="flex flex-wrap justify-center gap-3">
          {categories.map(category => (
            <button 
              class="px-4 py-2 rounded-full border border-gray-300 text-gray-700 hover:bg-primary hover:text-white hover:border-primary transition-all duration-300 category-filter"
              data-category={category.slug}
            >
              {category.name}
            </button>
          ))}
        </div>
      </div>

      <!-- Featured Post -->
      <div class="mb-16">
        <h2 class="text-2xl font-semibold mb-6 text-gray-900">
          {isEN ? 'Featured Article' : 'Препоръчана статия'}
        </h2>
        <article class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
          <div class="md:flex">
            <div class="md:w-1/2">
              <img 
                src={blogPosts[0].image} 
                alt={blogPosts[0].title}
                class="w-full h-64 md:h-full object-cover"
                width="600"
                height="400"
              />
            </div>
            <div class="md:w-1/2 p-8">
              <div class="flex items-center mb-4">
                <span class="bg-primary text-white px-3 py-1 rounded-full text-sm font-medium">
                  {blogPosts[0].category}
                </span>
                <span class="ml-3 text-gray-500 text-sm">{blogPosts[0].date}</span>
              </div>
              <h3 class="text-2xl font-bold text-gray-900 mb-4">
                <a href={`/blog/${blogPosts[0].slug}`} class="hover:text-primary transition-colors">
                  {blogPosts[0].title}
                </a>
              </h3>
              <p class="text-gray-600 mb-6">
                {blogPosts[0].excerpt}
              </p>
              <div class="flex items-center justify-between">
                <a 
                  href={`/blog/${blogPosts[0].slug}`}
                  class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark transition-colors font-medium"
                >
                  {isEN ? 'Read More' : 'Прочетете повече'}
                </a>
                <span class="text-gray-500 text-sm">{blogPosts[0].readTime}</span>
              </div>
            </div>
          </div>
        </article>
      </div>

      <!-- Blog Posts Grid -->
      <div class="mb-12">
        <h2 class="text-2xl font-semibold mb-6 text-gray-900">
          {isEN ? 'Latest Articles' : 'Последни статии'}
        </h2>
        
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="blog-posts-grid">
          {blogPosts.slice(1).map(post => (
            <article class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 blog-post" data-category={post.category.toLowerCase().replace(' ', '-')}>
              <img 
                src={post.image} 
                alt={post.title}
                class="w-full h-48 object-cover"
                width="400"
                height="200"
              />
              <div class="p-6">
                <div class="flex items-center mb-3">
                  <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm">
                    {post.category}
                  </span>
                  <span class="ml-3 text-gray-500 text-sm">{post.date}</span>
                </div>
                
                <h3 class="text-xl font-semibold text-gray-900 mb-3">
                  <a href={`/blog/${post.slug}`} class="hover:text-primary transition-colors">
                    {post.title}
                  </a>
                </h3>
                
                <p class="text-gray-600 mb-4">
                  {post.excerpt}
                </p>
                
                <div class="flex items-center justify-between">
                  <a 
                    href={`/blog/${post.slug}`}
                    class="text-primary font-medium hover:text-primary-dark transition-colors"
                  >
                    {isEN ? 'Read More →' : 'Прочетете повече →'}
                  </a>
                  <span class="text-gray-500 text-sm">{post.readTime}</span>
                </div>
              </div>
            </article>
          ))}
        </div>
      </div>

      <!-- Newsletter Signup -->
      <div class="bg-gradient-to-r from-primary to-primary-dark rounded-xl p-8 text-white text-center">
        <h2 class="text-2xl font-bold mb-4">
          {isEN ? 'Get Expert Tips Delivered' : 'Получавайте експертни съвети'}
        </h2>
        <p class="text-xl mb-6 opacity-90">
          {isEN 
            ? 'Subscribe to our newsletter for the latest appliance maintenance tips and repair guides'
            : 'Абонирайте се за нашия бюлетин за най-новите съвети за поддръжка и ръководства за ремонт'}
        </p>
        
        <form class="max-w-md mx-auto flex gap-3">
          <input 
            type="email" 
            placeholder={isEN ? 'Enter your email' : 'Въведете вашия имейл'}
            class="flex-1 px-4 py-3 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-white"
            required
          />
          <button 
            type="submit" 
            class="bg-accent hover:bg-amber-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors"
          >
            {isEN ? 'Subscribe' : 'Абонирай се'}
          </button>
        </form>
        
        <p class="text-sm mt-4 opacity-75">
          {isEN 
            ? 'No spam, unsubscribe at any time. We respect your privacy.'
            : 'Без спам, отписване по всяко време. Уважаваме вашата поверителност.'}
        </p>
      </div>

      <!-- Contact CTA - PHONE AND EMAIL ONLY NOW -->
      <div class="mt-16 text-center">
        <h2 class="text-2xl font-semibold text-gray-900 mb-4">
          {isEN ? 'Need Professional Help?' : 'Нуждаете се от професионална помощ?'}
        </h2>
        <p class="text-gray-600 mb-6">
          {isEN 
            ? 'Can\'t find the answer you\'re looking for? Our expert technicians are here to help.'
            : 'Не можете да намерите отговора, който търсите? Нашите експертни техници са тук, за да помогнат.'}
        </p>
        
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="tel:+359898340982" class="btn-primary inline-flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
            </svg>
            089 834 0982
          </a>
          
          <!-- COMMENTED OUT - BOOKING DISABLED
          <a href="/book" class="btn-cta inline-flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path>
            </svg>
            {isEN ? 'Book Service' : 'Запазете час'}
          </a>
          -->
          
          <a href="mailto:n.ivanov.ivanov@abv.bg" class="btn-cta inline-flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
            {isEN ? 'Send Email' : 'Изпратете имейл'}
          </a>
        </div>
        
        <!-- Additional info text for phone booking -->
        <div class="mt-4 text-center text-gray-600 text-sm">
          <p>{isEN ? 'Call to schedule your repair appointment' : 'Обадете се за запазване на час за ремонт'}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- SEO Content Section -->
  <div class="rotorem-seo-text">
    <style>
      .rotorem-seo-text {
        font-size: 74%;
        color: #777 !important;
        background-color: #f9fafb;
        padding: 2rem 0;
      }
      .rotorem-seo-text h2,
      .rotorem-seo-text h3,
      .rotorem-seo-text h4 {
        font-size: 1em;
        margin: 1em 0 0.5em;
        color: #777;
        font-weight: 400;
      }
      .rotorem-seo-text a {
        color: #777;
        text-decoration: underline;
      }
      .rotorem-seo-text p {
        margin: 0.5em 0;
        line-height: 1.5;
      }
      .rotorem-seo-text ul {
        margin: 0.5em 0;
        padding-left: 1.5em;
      }
      .rotorem-seo-text li {
        margin: 0.3em 0;
      }
    </style>
    
    <div class="container max-w-4xl">
      <h2>Блог за ремонт на битова техника – полезни съвети и ръководства</h2>
      <p>В нашия блог за ремонт на битова техника ще намерите експертни съвети и ръководства от професионалните техници на РотоРем Варна. Научете как да поддържате правилно вашите домакински уреди, как да разпознаете ранните признаци на повреди и кога е най-подходящо да се обърнете към професионален сервиз.</p>

      <h2>Съвети за поддръжка на перални машини</h2>
      <p>Пералните машини са едни от най-използваните уреди в дома и правилната им поддръжка може значително да удължи живота им. Редовното почистване на филтрите, използването на подходящи препарати и правилното дозиране на прах за пране са ключови за дълготрайната работа на вашата пералня.</p>

      <h2>Как да разпознаете проблеми със съдомиялните машини</h2>
      <p>Съдомиялните машини могат да показват различни симптоми преди да се повредят окончателно. Странни звуци, лошо измиване на съдовете, течове на вода или проблеми с източването са сигнали, че е време да се свържете с професионален сервиз за диагностика и ремонт.</p>

      <h2>Електрическа безопасност в дома</h2>
      <p>Правилното използване на електрическите уреди и редовната проверка на инсталациите са от съществено значение за безопасността в дома. Нашите сертифицирани електротехници споделят важни съвети за предотвратяване на електрически аварии и поддържане на безопасна домашна среда.</p>

      <h2>Кога да ремонтираме, а кога да подменяме уредите</h2>
      <p>Един от най-честите въпроси, които получаваме, е дали си струва да ремонтираме стар уред или е по-изгодно да го подменим с нов. В нашите статии ще намерите подробни анализи и практични съвети, които ще ви помогнат да вземете правилното решение въз основа на възрастта на уреда, цената на ремонта и енергийната ефективност.</p>
    </div>
  </div>
</Layout>

<script>
  // Category filtering functionality
  document.addEventListener('DOMContentLoaded', function() {
    const categoryButtons = document.querySelectorAll<HTMLButtonElement>('.category-filter');
    const blogPosts = document.querySelectorAll<HTMLElement>('.blog-post');
    
    categoryButtons.forEach(button => {
      button.addEventListener('click', function(event) {
        const target = event.target as HTMLButtonElement;
        const selectedCategory = target.getAttribute('data-category');
        
        // Update button states
        categoryButtons.forEach(btn => {
          btn.classList.remove('bg-primary', 'text-white', 'border-primary');
          btn.classList.add('border-gray-300', 'text-gray-700');
        });
        
        target.classList.add('bg-primary', 'text-white', 'border-primary');
        target.classList.remove('border-gray-300', 'text-gray-700');
        
        // Filter posts
        blogPosts.forEach(post => {
          if (selectedCategory === 'all') {
            post.style.display = 'block';
          } else {
            const postCategory = post.getAttribute('data-category');
            if (postCategory === selectedCategory) {
              post.style.display = 'block';
            } else {
              post.style.display = 'none';
            }
          }
        });
      });
    });
    
    // Set "All" as active by default
    const allButton = document.querySelector<HTMLButtonElement>('[data-category="all"]');
    if (allButton) {
      allButton.classList.add('bg-primary', 'text-white', 'border-primary');
    }
  });
</script>