---
import Layout from '../layouts/Base.astro';
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const isEN = lang === 'en';

// Form styling with explicit colors
const inputClass = "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all text-gray-800 bg-white";
const textareaClass = "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all text-gray-800 bg-white";
const selectClass = "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all text-gray-800 bg-white";
const labelClass = "block text-sm text-gray-700 mb-1 font-medium";

const title = t('book.title');
const heading = t('book.heading');
---

<Layout title={title} noindex={true}>
  <section class="py-24">
    <div class="container">
      <h1 class="text-center text-3xl font-semibold mb-8">{heading}</h1>

      <form
        class="max-w-xl mx-auto grid gap-6"
        name="booking"
        method="POST"
        data-netlify="true"
        netlify-honeypot="bot-field"
        action="/thankyou"
      >
        <input type="hidden" name="form-name" value="booking" />
        <input name="bot-field" class="hidden" />

        <input 
          required 
          name="name" 
          placeholder={t('book.name')} 
          class={inputClass}
          style="color: #111827; background-color: white;"
        />
        
        <input 
          required 
          name="phone" 
          placeholder={t('book.phone')} 
          class={inputClass}
          type="tel"
          style="color: #111827; background-color: white;"
        />
        
        <input 
          name="email" 
          placeholder={t('book.email')} 
          class={inputClass}
          type="email"
          style="color: #111827; background-color: white;"
        />
        
        <input 
          name="appliance" 
          placeholder={t('book.appliance')} 
          class={inputClass}
          style="color: #111827; background-color: white;"
        />
        
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class={labelClass}>
              {t('book.date')}
            </label>
            <input 
              name="date" 
              type="date" 
              class={inputClass}
              style="color: #111827; background-color: white;"
            />
          </div>
          
          <div>
            <label class={labelClass}>
              {t('book.time')}
            </label>
            <select name="time" class={selectClass} style="color: #111827; background-color: white;">
              <option value="">{t('book.selectTime')}</option>
              <option value="morning">{t('book.morning')}</option>
              <option value="afternoon">{t('book.afternoon')}</option>
              <option value="evening">{t('book.evening')}</option>
            </select>
          </div>
        </div>
        
        <textarea 
          name="details" 
          rows="4" 
          placeholder={t('book.details')} 
          class={textareaClass}
          style="color: #111827; background-color: white;"
        ></textarea>

        <button type="submit" class="btn-cta w-full">
          {t('book.submit')}
        </button>
      </form>
    </div>
  </section>
</Layout>