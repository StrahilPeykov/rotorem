---
import Layout from '../layouts/Base.astro';
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const isEN = lang === 'en';

const title = t('book.title');
const heading = t('book.heading');
const successText = t('book.success');
---

<Layout title={title} noindex={true}>
  <section class="py-24">
    <div class="container">
      <h1 class="text-center text-3xl font-semibold mb-8">{heading}</h1>

      <form
        class="max-w-xl mx-auto grid gap-6"
        name="booking"
        method="POST"
        data-netlify="true"
        netlify-honeypot="bot-field"
        action="/thankyou"
      >
        <input type="hidden" name="form-name" value="booking" />
        <input name="bot-field" class="hidden" />

        <input 
          required 
          name="name" 
          placeholder={t('book.name')} 
          class="input" 
        />
        
        <input 
          required 
          name="phone" 
          placeholder={t('book.phone')} 
          class="input" 
          type="tel"
        />
        
        <input 
          name="email" 
          placeholder={t('book.email')} 
          class="input" 
          type="email"
        />
        
        <input 
          name="appliance" 
          placeholder={t('book.appliance')} 
          class="input" 
        />
        
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm text-gray-600 mb-1">
              {t('book.date')}
            </label>
            <input 
              name="date" 
              type="date" 
              class="input" 
            />
          </div>
          
          <div>
            <label class="block text-sm text-gray-600 mb-1">
              {t('book.time')}
            </label>
            <select name="time" class="input">
              <option value="">{t('book.selectTime')}</option>
              <option value="morning">{t('book.morning')}</option>
              <option value="afternoon">{t('book.afternoon')}</option>
              <option value="evening">{t('book.evening')}</option>
            </select>
          </div>
        </div>
        
        <textarea 
          name="details" 
          rows="4" 
          placeholder={t('book.details')} 
          class="input"
        ></textarea>

        <button type="submit" class="btn-cta w-full">
          {t('book.submit')}
        </button>
      </form>
    </div>
  </section>
</Layout>